# Tokamak-RL Production Deployment v6.0

## Overview

This directory contains all configuration and scripts needed for production deployment of Tokamak-RL v6.0.

## Architecture

- **Environment**: production
- **Namespace**: tokamak-rl
- **Replicas**: 3 (auto-scaling: 2-10)
- **Resources**: 500m-2000m CPU, 1Gi-4Gi Memory
- **Storage**: 10Gi
- **Domain**: tokamak-rl.terragonlabs.io
- **TLS**: Enabled

## Quick Start

### 1. Build Docker Image
```bash
./scripts/build.sh
```

### 2. Deploy to Kubernetes
```bash
./scripts/deploy.sh
```

### 3. Check Health
```bash
./scripts/health-check.sh
```

## Directory Structure

```
deployment_v6/
├── docker/                 # Docker configuration
│   ├── Dockerfile         # Production Dockerfile
│   ├── docker-compose.yml # Local development
│   └── .dockerignore      # Docker ignore rules
├── k8s/                   # Kubernetes manifests
│   ├── namespace.yaml     # Namespace
│   ├── configmap.yaml     # Configuration
│   ├── pvc.yaml           # Persistent storage
│   ├── deployment.yaml    # Application deployment
│   ├── service.yaml       # Service definition
│   ├── ingress.yaml       # Ingress configuration
│   └── hpa.yaml           # Horizontal pod autoscaler
├── monitoring/            # Monitoring configuration
│   ├── prometheus-config.yaml
│   └── grafana-dashboard.yaml
├── scripts/              # Deployment scripts
│   ├── build.sh          # Build image
│   ├── deploy.sh         # Deploy to K8s
│   └── health-check.sh   # Health monitoring
└── docs/                 # Documentation
    └── README.md         # This file
```

## Prerequisites

- Docker
- Kubernetes cluster
- kubectl configured
- Helm (for monitoring stack)

## Configuration

Configuration is managed through:
- Environment variables
- ConfigMap (`k8s/configmap.yaml`)
- Deployment manifest (`k8s/deployment.yaml`)

## Monitoring

Monitoring stack includes:
- Prometheus for metrics collection
- Grafana for visualization
- Built-in health checks and readiness probes

Access Grafana dashboard at: https://tokamak-rl.terragonlabs.io/grafana

## Security

- Non-root container execution
- Resource limits and requests
- Network policies (recommended)
- TLS termination at ingress
- Security contexts applied

## Scaling

Auto-scaling is configured based on:
- CPU utilization (target: 70%)
- Memory utilization (target: 80%)
- Min replicas: 2
- Max replicas: 10

## Troubleshooting

### Common Issues

1. **Pod not starting**: Check resource limits and node capacity
2. **Service unavailable**: Verify ingress and DNS configuration
3. **Performance issues**: Monitor resource usage and scale accordingly

### Useful Commands

```bash
# Check pod logs
kubectl logs -f deployment/tokamak-rl -n tokamak-rl

# Scale deployment
kubectl scale deployment tokamak-rl --replicas=5 -n tokamak-rl

# Port forward for debugging
kubectl port-forward svc/tokamak-rl-service 8000:80 -n tokamak-rl
```

## Support

For support and troubleshooting, refer to:
- Application logs: `kubectl logs`
- Monitoring dashboards: Grafana
- Health checks: `./scripts/health-check.sh`

---

Generated by Tokamak-RL Deployment System v6.0
Timestamp: 2025-08-17T15:14:43.897306
